{% extends "public/base.html" %} {% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
  const url = "{{ url.url_long_url }}";
  $(document).ready(function () {
    let seconds = 5;
    $("#redirection").show();
    $("#countdown").html(seconds);
    setInterval(function () {
      seconds -= 1;
      $("#countdown").html(seconds);
      if (seconds == 0) {
        $("#redirection").hide();
        window.location = url;
      }
    }, 1000);
  });
</script>

<div class="text-center">
  <h1 class="fw-bold mb-2 py-2"><i class="fa-regular fa-paper-plane"></i> Redirection</h1>
  <h5 class="mb-0 py-0">Almost there...</h5>
  <hr />
</div>
<div class="container">
  <div class="d-flex justify-content-center">
    <h4 class="fw-bold mb-2 py-2">{{ url.url_title }}</h4>
  </div>
  <div class="d-flex justify-content-center">
    <div class="picture px-2 py-2">
      <img src="{{ url_for('static', filename='img/redirection.png') }}" height="350" style="border-radius: 10px" />
    </div>
    <div class="visitor-info">
      <table id="visitor-table" class="table table-bordered table-striped text-center">
        <thead class="bg-dark text-light">
          <tr>
            <th colspan="2">YOUR SIDE</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="subject" width="100">IP Address</td>
            <td>{{ visitor["ip"] }}</td>
          </tr>
          <tr>
            <td class="subject" width="100">City</td>
            <td>{{ visitor["city"] }}</td>
          </tr>
          <tr>
            <td class="subject" width="100">Country</td>
            <td>{{ visitor["country"] }}</td>
          </tr>
          <tr>
            <td class="subject" width="100">ISP</td>
            <td>{{ visitor["isp"] }}</td>
          </tr>
          <tr>
            <td class="subject" width="100">OS</td>
            <td>{{ visitor["os"] }}</td>
          </tr>
          <tr>
            <td class="subject" width="100">Browser</td>
            <td>{{ visitor["browser"] }}</td>
          </tr>
          <tr>
            <td class="subject" width="100">Machine</td>
            <td>{{ visitor["machine"] }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="text-center">
    <div id="redirection">You will be redirected after <span id="countdown"></span> seconds.</div>
  </div>
</div>

{% endblock %}
